<div class="container">
  <!-- üîç Buscador -->
  <div class="d-flex align-items-center gap-2 my-3">
    <input type="text" class="form-control form-control-sm w-25" [placeholder]="placeholderText"
      [(ngModel)]="terminoBusqueda" (input)="filtrarDatos()" />
    <button class="btn btn-dark btn-sm" (click)="limpiarBusqueda()">Limpiar</button>
  </div>

  <!-- üìå Tabla de tickets pendientes -->
  <div class="glass-card p-3 rounded shadow-sm mb-4">
    <h5 class="fw-bold mb-3">üìå Tickets Pendientes</h5>
    <table class="table table-hover table-bordered align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>Fecha de Creaci√≥n</th>
          <th>Descripci√≥n</th>
          <th>Asignado a</th>
          <th>Equipo Afectado</th>
          <th>Creado por</th>
          <th>Prioridad</th>
          <th>Tiempo Transcurrido</th>
          <th>Acciones</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of datosFiltradosPendientes; let i = index">
          <td>
            <span *ngIf="item.fecha_creacion">
              {{ item.fecha_creacion | date:'short' }}
            </span>
            <span *ngIf="!item.fecha_creacion">‚Äî</span>
          </td>
          <td>{{ item.descripcion || '‚Äî' }}</td>
          <td>{{ item.usuario_asignado?.nombre || '‚Äî' }}</td>
          <td>{{ item.equipoAfectado?.product?.name || '‚Äî' }}</td>
          <td>{{ item.usuario_creador?.nombre || '‚Äî' }}</td>
          <td>{{ item.priority?.nombre || '‚Äî' }}</td>
          <td>
            <span *ngIf="item.fecha_cierre">
              {{ calcularTiempoRestante(item.fecha_cierre) }}
            </span>
            <span *ngIf="!item.fecha_cierre">‚Äî</span>
          </td>
          <td>
            <div class="d-flex justify-content-center gap-2">
              <button class="btn btn-outline-primary btn-sm" (click)="modificarPeticion(item)">Editar</button>
              <button class="btn btn-outline-danger btn-sm" (click)="borrarPeticion(i)">Eliminar</button>
              <button class="btn btn-outline-success btn-sm" (click)="marcarComoResuelta(item)">‚úîÔ∏è Resuelta</button>
            </div>
          </td>
          <td>
            <span [ngClass]="getClaseEstado(item.status?.nombre || '')" class="estado-label">
              {{ item.status?.nombre }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="glass-card p-3 rounded shadow-sm">
    <h5 class="fw-bold mb-3">‚úÖ Tickets Resueltos</h5>
    <table class="table table-hover table-bordered align-middle text-center">
      <thead class="table-success">
        <tr>
          <th>Fecha de Creaci√≥n</th>
          <th>Descripci√≥n</th>
          <th>Asignado a</th>
          <th>Equipo Afectado</th>
          <th>Creado por</th>
          <th>Prioridad</th>
          <th>Tiempo Transcurrido</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of datosResueltos">
          <td>
            <span *ngIf="item.fecha_creacion">
              {{ item.fecha_creacion | date:'short' }}
            </span>
            <span *ngIf="!item.fecha_creacion">‚Äî</span>
          </td>
          <td>{{ item.descripcion || '‚Äî' }}</td>
          <td>{{ item.usuario_asignado?.nombre || '‚Äî' }}</td>
          <td>{{ item.equipoAfectado?.product?.name || '‚Äî' }}</td>
          <td>{{ item.usuario_creador?.nombre || '‚Äî' }}</td>
          <td>{{ item.priority?.nombre || '‚Äî' }}</td>
          <td>{{ item.usuario_creador?.nombre || '‚Äî' }}</td>
          <td>{{ item.priority?.nombre }}</td>
          <td>
            <span *ngIf="item.fecha_cierre">
              {{ calcularTiempoRestante(item.fecha_cierre) }}
            </span>
            <span *ngIf="!item.fecha_cierre">‚Äî</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ‚ûï Botones principales -->
  <div class="d-flex gap-3 justify-content-end my-3">
    <button class="btn btn-success btn-sm" (click)="crearPeticion()">
      <i class="bi bi-plus-circle"></i> CREAR
    </button>
    <button class="btn btn-warning btn-sm" [disabled]="true">
      <i class="bi bi-pencil"></i> MODIFICAR
    </button>
    <button class="btn btn-danger btn-sm" (click)="borrarTodas()">
      <i class="bi bi-trash"></i> ELIMINAR TODAS
    </button>
  </div>
</div>