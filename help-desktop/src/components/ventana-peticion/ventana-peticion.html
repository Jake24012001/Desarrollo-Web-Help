<form class="formulario-peticion" (ngSubmit)="crearTicket()">
  <div class="form-group mb-3">
    <label for="tipoPeticion">Tipo de petición:</label>
    <input type="text" id="tipoPeticion" class="form-control" placeholder="Ingrese su petición"
      [(ngModel)]="tipoPeticion" name="tipoPeticion" required />
  </div>

  <!-- Seleccion de usuario -->
  <div class="form-group mb-3">
    <label for="usuario">Selecciona un usuario:</label>
    <select id="usuario" class="form-select mb-3" [(ngModel)]="usuarioSeleccionado" name="usuario" required>
      <option value="" disabled selected>-- Selecciona --</option>
      <option *ngFor="let usuario of usuarios" [value]="usuario.idUsuario">
        {{ usuario.nombre }}
      </option>
    </select>
  </div>

  <!-- Categoría de equipo -->
  <div class="form-group mb-3">
    <label for="producto">Categoría de equipo</label>
    <select name="producto" id="producto" class="form-select" [(ngModel)]="productoSeleccionado"
      (change)="filtrarEquiposPorTipo()" required>
      <option value="" disabled>-- Selecciona --</option>
      <option *ngFor="let producto of productosUnicos" [value]="producto.type">
        {{ producto.type }}
      </option>
    </select>
  </div>

  <!-- Equipos disponibles filtrados -->
  <div class="form-group mb-3">
    <label for="equipo">Equipos disponibles:</label>
    <div class="d-flex gap-2 mb-2">
      <select id="equipo" class="form-select" [(ngModel)]="equipoSeleccionado" name="equipo" required>
        <option value="" disabled>-- Selecciona --</option>
        <option *ngFor="let equipo of equiposFiltrados" [value]="equipo.id">
          {{ equipo.serial }} - {{equipo.product.name}}
        </option>
      </select>
    </div>
  </div>

  <div class="form-group mb-3">
    <label for="detallePeticion">Detalle de petición:</label>
    <textarea id="detallePeticion" class="form-control" rows="4" placeholder="Describa su problemática"
      [(ngModel)]="detallePeticion" name="detallePeticion" required></textarea>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-danger">Enviar</button>
    <button type="button" class="btn btn-secondary" (click)="cancelarAccion()">
      Cancelar
    </button>
  </div>

  <!--Estado respectivo del ticket al momento de crearlo-->
  <div class="mt-3">
    <label>Estado:</label>
    <span class="badge" [ngClass]="{
      'bg-warning': ticket?.status?.nombre === 'Pendiente',
      'bg-success': ticket?.status?.nombre === 'Aprobado',
      'bg-danger': ticket?.status?.nombre === 'Rechazado'
    }">
      {{ ticket?.status?.nombre || 'Sin estado' }}
    </span>
  </div>
</form>